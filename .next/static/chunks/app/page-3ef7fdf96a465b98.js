(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67:function(){},2061:function(){},5929:function(e,t,s){Promise.resolve().then(s.bind(s,8262))},8262:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var a=s(7437),n=s(2265),r=s(7138),l=s(1169),c=s(1240),i=s(6935),d=s(8030);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var x=s(9003);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,d.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),h=(0,d.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),u=(0,d.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),p=[{title:"Customer Management",icon:(0,a.jsx)(c.Z,{className:"w-5 h-5"}),children:[{title:"Customer Payments",href:"/",icon:(0,a.jsx)(i.Z,{className:"w-4 h-4"})},{title:"Customer Admin",href:"/admin",icon:(0,a.jsx)(o,{className:"w-4 h-4"})}]},{title:"Expense Management",icon:(0,a.jsx)(x.Z,{className:"w-5 h-5"}),children:[{title:"Record Expenses",href:"/expenses",icon:(0,a.jsx)(m,{className:"w-4 h-4"})}]}];function g(e){let{collapsed:t=!1,onToggle:s}=e,c=(0,l.usePathname)(),[i,d]=(0,n.useState)(["Customer Management","Expense Management"]),o=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},x=e=>"/"===e?"/"===c:c.startsWith(e),m=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.children&&e.children.length>0,l=i.includes(e.title),c=!!e.href&&x(e.href);if(n){var d;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>o(e.title),className:"w-full flex items-center justify-between px-3 py-2.5 text-sm font-medium rounded-lg transition-colors ".concat(0===s?"text-gray-700 hover:bg-gray-100 hover:text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"," ").concat(t?"justify-center":""),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[e.icon,!t&&(0,a.jsx)("span",{children:e.title})]}),!t&&(l?(0,a.jsx)(h,{className:"w-4 h-4"}):(0,a.jsx)(u,{className:"w-4 h-4"}))]}),!t&&l&&(0,a.jsx)("div",{className:"ml-4 mt-1 space-y-1",children:null===(d=e.children)||void 0===d?void 0:d.map(e=>m(e,s+1))})]},e.title)}return(0,a.jsxs)(r.default,{href:e.href,className:"flex items-center space-x-3 px-3 py-2.5 text-sm font-medium rounded-lg transition-colors ".concat(c?"bg-blue-100 text-blue-700 border-r-2 border-blue-700":0===s?"text-gray-700 hover:bg-gray-100 hover:text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"," ").concat(t?"justify-center":""),children:[e.icon,!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"flex-1",children:e.title}),e.badge&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.badge})]})]},e.title)};return(0,a.jsxs)("div",{className:"bg-white border-r border-gray-200 transition-all duration-300 ".concat(t?"w-16":"w-64"," flex flex-col h-full"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[!t&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"AG"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Business Ledger"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Customer & Expense Mgmt"})]})]}),t&&(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg flex items-center justify-center mx-auto",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"AG"})})]}),(0,a.jsx)("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:p.map(e=>m(e))}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4",children:!t&&(0,a.jsxs)("div",{className:"flex items-center space-x-3 px-3 py-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-600 font-medium text-sm",children:"BK"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Balakrishna"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Administrator"})]})]})})]})}/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,d.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);function f(e){let{children:t}=e,[s,r]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)(g,{collapsed:s,onToggle:()=>r(!s)})}),l&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>c(!1)}),(0,a.jsx)("div",{className:"fixed left-0 top-0 h-full w-64 bg-white",children:(0,a.jsx)(g,{})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 px-4 py-3 lg:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>c(!0),className:"lg:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:(0,a.jsx)(y,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>r(!s),className:"hidden lg:block p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:(0,a.jsx)(y,{className:"w-5 h-5"})}),(0,a.jsx)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:(0,a.jsx)("span",{children:"Welcome back!"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-2 text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Today:"}),(0,a.jsx)("span",{className:"font-medium",children:new Date().toLocaleDateString()})]}),(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-blue-700 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-medium text-sm",children:"BK"})})]})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:t})]})]})}var j=s(3102),N=s(495);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,d.Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),b=(0,d.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var w=s(4241),k=s(6273);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let _=(0,d.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var S=s(6013);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,d.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var T=s(4697),R=s(6649),A=s(883);let E=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),M=e=>E.format(e||0);function Z(e){let{consignments:t,onAddConsignment:s,onEditConsignment:r,onDeleteConsignment:l,customerId:c,customers:i}=e,[d,o]=(0,n.useState)(null),[x,m]=(0,n.useState)({}),h=e=>{o(e.id),m({total:e.total,rtgs_expected:e.rtgs_expected,cash_expected:e.cash_expected,remarks:e.remarks})},u=()=>{if(d){let e=x.rtgs_expected||0,t=x.cash_expected||0;r(d,{...x,total:e+t}),o(null),m({})}},p=()=>{o(null),m({})};return(0,a.jsx)(S.Zb,{className:"rounded-2xl shadow-sm",children:(0,a.jsxs)(S.aY,{className:"p-0 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b bg-gray-50",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Consignments (Expected)"}),(0,a.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Date"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-xl px-3 py-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)(j.I,{name:"c_date",type:"date",className:"border-0 p-0 focus-visible:ring-0 w-full",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Total Amount (₹)"}),(0,a.jsx)(j.I,{name:"c_total",type:"number",placeholder:"Enter total amount",className:"border rounded-xl px-3 py-2 w-full",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"RTGS Expected (₹)"}),(0,a.jsx)(j.I,{name:"c_rtgs",type:"number",placeholder:"RTGS amount",className:"border rounded-xl px-3 py-2 w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Cash Expected (₹)"}),(0,a.jsx)(j.I,{name:"c_cash",type:"number",placeholder:"Cash amount",className:"border rounded-xl px-3 py-2 w-full"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-3 space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Remarks (Optional)"}),(0,a.jsx)(j.I,{name:"c_remarks",type:"text",placeholder:"Enter any remarks",className:"border rounded-xl px-3 py-2 w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\xa0"}),(0,a.jsxs)(N.z,{className:"rounded-xl w-full",type:"submit",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"})," Add Consignment"]})]})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"S.No"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-900",children:"Total (₹)"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-900",children:"RTGS Expected (₹)"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-900",children:"Cash Expected (₹)"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Remarks"}),(0,a.jsx)("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"No consignments found. Add your first consignment using the form above."})}):t.map((e,t)=>{let s=i.find(t=>t.id===e.customer_id),n=d===e.id;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:t+1}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 whitespace-nowrap",children:e.date}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(null==s?void 0:s.name)||"Unknown"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right font-medium",children:n?(0,a.jsxs)("div",{className:"w-24 text-right p-2 text-sm bg-gray-100 rounded border-2 border-dashed border-gray-300",children:[M(x.total||0),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated"})]}):M(e.total)}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:n?(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)(j.I,{type:"number",value:x.rtgs_expected||0,onChange:e=>{let t=parseFloat(e.target.value)||0,s=x.cash_expected||0;m({...x,rtgs_expected:t,total:t+s})},className:"w-24 text-right p-1 text-sm",step:"0.01",min:"0"})}):M(e.rtgs_expected)}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:n?(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)(j.I,{type:"number",value:x.cash_expected||0,onChange:e=>{let t=parseFloat(e.target.value)||0,s=x.rtgs_expected||0;m({...x,cash_expected:t,total:s+t})},className:"w-24 text-right p-1 text-sm",step:"0.01",min:"0"})}):M(e.cash_expected)}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:n?(0,a.jsx)(j.I,{type:"text",value:x.remarks||"",onChange:e=>m({...x,remarks:e.target.value}),className:"w-32 p-1 text-sm",placeholder:"Remarks"}):e.remarks||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:u,className:"text-green-600 hover:text-green-800 p-1 rounded",title:"Save changes",children:(0,a.jsx)(C,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:p,className:"text-gray-600 hover:text-gray-800 p-1 rounded",title:"Cancel editing",children:(0,a.jsx)(T.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-800 p-1 rounded",title:"Edit consignment",children:(0,a.jsx)(R.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this consignment?")&&l(e.id)},className:"text-red-600 hover:text-red-800 p-1 rounded",title:"Delete consignment",children:(0,a.jsx)(A.Z,{className:"w-4 h-4"})})]})})})]},e.id)})})]})}),t.length>0&&(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:["Total Records: ",t.length]}),(0,a.jsxs)("div",{className:"space-x-6",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:["Total Amount: ",M(t.reduce((e,t)=>e+(t.total||0),0))]}),(0,a.jsxs)("span",{className:"font-medium text-blue-700",children:["RTGS Expected: ",M(t.reduce((e,t)=>e+(t.rtgs_expected||0),0))]}),(0,a.jsxs)("span",{className:"font-medium text-green-700",children:["Cash Expected: ",M(t.reduce((e,t)=>e+(t.cash_expected||0),0))]})]})]})})]})})}let D=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),G=e=>D.format(e||0);function I(e){let{transactions:t,accounts:s,customers:r,onAddTransaction:l,onEditTransaction:c,onDeleteTransaction:i}=e,[d,o]=(0,n.useState)(null),[x,m]=(0,n.useState)({}),h=e=>{o(e.id),m({amount:e.amount,note:e.note})},u=()=>{if(d){if(0>=(x.amount||0)){alert("Amount must be greater than 0");return}c(d,x),o(null),m({})}},p=()=>{o(null),m({})},g=t.filter(e=>"RTGS"===e.mode),y=t.filter(e=>"CASH"===e.mode);return(0,a.jsx)(S.Zb,{className:"rounded-2xl shadow-sm",children:(0,a.jsxs)(S.aY,{className:"p-0 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b bg-gray-50",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Payments (Transactions)"}),(0,a.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Date"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-xl px-3 py-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)(j.I,{name:"t_date",type:"date",className:"border-0 p-0 focus-visible:ring-0 w-full",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Payment Mode"}),(0,a.jsxs)("select",{name:"t_mode",className:"border rounded-xl px-3 py-2 w-full h-10 text-sm",children:[(0,a.jsx)("option",{value:"RTGS",children:"RTGS"}),(0,a.jsx)("option",{value:"CASH",children:"CASH"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Bank Account"}),(0,a.jsx)("select",{name:"t_account",className:"border rounded-xl px-3 py-2 w-full h-10 text-sm",children:s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Amount (₹)"}),(0,a.jsx)(j.I,{name:"t_amount",type:"number",placeholder:"Enter amount",className:"border rounded-xl px-3 py-2 w-full",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Note (Optional)"}),(0,a.jsx)(j.I,{name:"t_note",type:"text",placeholder:"Enter note",className:"border rounded-xl px-3 py-2 w-full"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(N.z,{className:"rounded-xl",type:"submit",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"})," Add Transaction"]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-0",children:[(0,a.jsxs)("div",{className:"border-r",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"RTGS Transactions"}),(0,a.jsxs)("p",{className:"text-sm text-blue-600",children:["Total: ",G(g.reduce((e,t)=>e+(t.amount||0),0)),"(",g.length," transactions)"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"sticky top-0 bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Date"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Customer"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Account"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900",children:"Amount (₹)"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Note"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===g.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 text-sm",children:"No RTGS transactions found"})}):g.map(e=>{let t=r.find(t=>t.id===e.customer_id),n=s.find(t=>t.id===e.account_id),l=d===e.id;return(0,a.jsxs)("tr",{className:"hover:bg-blue-25 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:e.date}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:(null==t?void 0:t.name)||"Unknown"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:(null==n?void 0:n.name)||"Unknown"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:l?(0,a.jsx)(j.I,{type:"number",value:x.amount||0,onChange:e=>m({...x,amount:parseFloat(e.target.value)||0}),className:"w-20 text-right p-1 text-sm",step:"0.01",min:"0"}):G(e.amount)}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:l?(0,a.jsx)(j.I,{type:"text",value:x.note||"",onChange:e=>m({...x,note:e.target.value}),className:"w-24 p-1 text-sm",placeholder:"Note"}):e.note||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center space-x-1",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:u,className:"text-green-600 hover:text-green-800 p-1 rounded",title:"Save changes",children:(0,a.jsx)(C,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:p,className:"text-gray-600 hover:text-gray-800 p-1 rounded",title:"Cancel editing",children:(0,a.jsx)(T.Z,{className:"w-3 h-3"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-800 p-1 rounded",title:"Edit transaction",children:(0,a.jsx)(R.Z,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this transaction?")&&i(e.id)},className:"text-red-600 hover:text-red-800 p-1 rounded",title:"Delete transaction",children:(0,a.jsx)(A.Z,{className:"w-3 h-3"})})]})})})]},e.id)})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"p-4 bg-green-50 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"Cash Transactions"}),(0,a.jsxs)("p",{className:"text-sm text-green-600",children:["Total: ",G(y.reduce((e,t)=>e+(t.amount||0),0)),"(",y.length," transactions)"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"sticky top-0 bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Date"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Customer"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Account"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900",children:"Amount (₹)"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Note"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===y.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 text-sm",children:"No cash transactions found"})}):y.map(e=>{let t=r.find(t=>t.id===e.customer_id),n=s.find(t=>t.id===e.account_id),l=d===e.id;return(0,a.jsxs)("tr",{className:"hover:bg-green-25 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:e.date}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:(null==t?void 0:t.name)||"Unknown"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:(null==n?void 0:n.name)||"Unknown"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:l?(0,a.jsx)(j.I,{type:"number",value:x.amount||0,onChange:e=>m({...x,amount:parseFloat(e.target.value)||0}),className:"w-20 text-right p-1 text-sm",step:"0.01",min:"0"}):G(e.amount)}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:l?(0,a.jsx)(j.I,{type:"text",value:x.note||"",onChange:e=>m({...x,note:e.target.value}),className:"w-24 p-1 text-sm",placeholder:"Note"}):e.note||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center space-x-1",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:u,className:"text-green-600 hover:text-green-800 p-1 rounded",title:"Save changes",children:(0,a.jsx)(C,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:p,className:"text-gray-600 hover:text-gray-800 p-1 rounded",title:"Cancel editing",children:(0,a.jsx)(T.Z,{className:"w-3 h-3"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-800 p-1 rounded",title:"Edit transaction",children:(0,a.jsx)(R.Z,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this transaction?")&&i(e.id)},className:"text-red-600 hover:text-red-800 p-1 rounded",title:"Delete transaction",children:(0,a.jsx)(A.Z,{className:"w-3 h-3"})})]})})})]},e.id)})})]})})]})]}),t.length>0&&(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-700",children:["Total Transactions: ",t.length]}),(0,a.jsxs)("div",{className:"space-x-6",children:[(0,a.jsxs)("span",{className:"font-medium text-blue-700",children:["RTGS Total: ",G(g.reduce((e,t)=>e+(t.amount||0),0))]}),(0,a.jsxs)("span",{className:"font-medium text-green-700",children:["Cash Total: ",G(y.reduce((e,t)=>e+(t.amount||0),0))]}),(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:["Grand Total: ",G(t.reduce((e,t)=>e+(t.amount||0),0))]})]})]})})]})})}var F=s(7800);async function P(){var e,t;if(F&&F.writeFile)return F;if((null===(e=window.XLSX)||void 0===e?void 0:e.writeFile)||(await new Promise((e,t)=>{let s=document.createElement("script");s.src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js",s.async=!0,s.onload=()=>e(),s.onerror=()=>t(Error("Failed to load XLSX from CDN")),document.head.appendChild(s)}),null===(t=window.XLSX)||void 0===t?void 0:t.writeFile))return window.XLSX;throw Error("XLSX not available after dynamic load")}let H=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),L=e=>H.format(e||0);function V(){var e;let[t,s]=(0,n.useState)("all"),[r,l]=(0,n.useState)(""),[c,i]=(0,n.useState)(""),[d,o]=(0,n.useState)([]),[x,m]=(0,n.useState)([]),[h,u]=(0,n.useState)([]),[p,g]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async function(){let[e,t]=await Promise.all([fetch("/api/customers").then(e=>e.json()),fetch("/api/bank-accounts").then(e=>e.json())]);o(e),m(t)})()},[]),(0,n.useEffect)(()=>{let e=new URLSearchParams;t&&e.set("customerId",t),r&&e.set("from",r),c&&e.set("to",c),fetch("/api/consignments?".concat(e.toString())).then(e=>e.json()).then(u),fetch("/api/transactions?".concat(e.toString())).then(e=>e.json()).then(g)},[t,r,c]);let y=(0,n.useMemo)(()=>{let e=h.reduce((e,t)=>e+(t.total||0),0),t=h.reduce((e,t)=>e+(t.rtgs_expected||0),0),s=h.reduce((e,t)=>e+(t.cash_expected||0),0),a=p.filter(e=>"RTGS"===e.mode).reduce((e,t)=>e+(t.amount||0),0),n=p.filter(e=>"CASH"===e.mode).reduce((e,t)=>e+(t.amount||0),0);return{expectedTotal:e,expectedRTGS:t,expectedCASH:s,receivedRTGS:a,receivedCASH:n,receivedTotal:a+n}},[h,p]),S="all"===t?"All Customers":(null===(e=d.find(e=>e.id===t))||void 0===e?void 0:e.name)||"";async function C(){try{let e=await P(),t=[{Metric:"Expected Total",Value:y.expectedTotal},{Metric:"Expected RTGS",Value:y.expectedRTGS},{Metric:"Expected Cash",Value:y.expectedCASH},{Metric:"Received RTGS",Value:y.receivedRTGS},{Metric:"Received Cash",Value:y.receivedCASH},{Metric:"Total Received",Value:y.receivedTotal},{Metric:"Pending RTGS",Value:Math.max(0,y.expectedRTGS-y.receivedRTGS)},{Metric:"Pending Cash",Value:Math.max(0,y.expectedCASH-y.receivedCASH)},{Metric:"Total Pending",Value:y.expectedTotal-y.receivedTotal}],s=d.map(e=>{let t=h.filter(t=>t.customer_id===e.id),s=p.filter(t=>t.customer_id===e.id),a=t.reduce((e,t)=>e+(t.total||0),0),n=t.reduce((e,t)=>e+(t.rtgs_expected||0),0),r=t.reduce((e,t)=>e+(t.cash_expected||0),0),l=s.filter(e=>"RTGS"===e.mode).reduce((e,t)=>e+(t.amount||0),0),c=s.filter(e=>"CASH"===e.mode).reduce((e,t)=>e+(t.amount||0),0);return{Customer:e.name,Expected_Total:a,Expected_RTGS:n,Expected_Cash:r,Received_RTGS:l,Received_Cash:c,Total_Received:l+c,Pending_RTGS:Math.max(0,n-l),Pending_Cash:Math.max(0,r-c),Total_Pending:a-(l+c),Collection_Rate:a>0?"".concat(((l+c)/a*100).toFixed(1),"%"):"0%"}}).filter(e=>e.Expected_Total>0||e.Total_Received>0),a=h.map((e,t)=>{var s;return{"S.No":t+1,Date:e.date,Customer:(null===(s=d.find(t=>t.id===e.customer_id))||void 0===s?void 0:s.name)||"Unknown","Total (₹)":e.total,"RTGS Expected (₹)":e.rtgs_expected||0,"Cash Expected (₹)":e.cash_expected||0,Remarks:e.remarks||""}}),n=p.filter(e=>"RTGS"===e.mode).map((e,t)=>{var s,a;return{"S.No":t+1,Date:e.date,Customer:(null===(s=d.find(t=>t.id===e.customer_id))||void 0===s?void 0:s.name)||"Unknown",Account:(null===(a=x.find(t=>t.id===e.account_id))||void 0===a?void 0:a.name)||"Unknown","Amount (₹)":e.amount,Note:e.note||""}}),r=p.filter(e=>"CASH"===e.mode).map((e,t)=>{var s,a;return{"S.No":t+1,Date:e.date,Customer:(null===(s=d.find(t=>t.id===e.customer_id))||void 0===s?void 0:s.name)||"Unknown",Account:(null===(a=x.find(t=>t.id===e.account_id))||void 0===a?void 0:a.name)||"Unknown","Amount (₹)":e.amount,Note:e.note||""}}),l=p.map((e,t)=>{var s,a;return{"S.No":t+1,Date:e.date,Customer:(null===(s=d.find(t=>t.id===e.customer_id))||void 0===s?void 0:s.name)||"Unknown",Mode:e.mode,Account:(null===(a=x.find(t=>t.id===e.account_id))||void 0===a?void 0:a.name)||"Unknown","Amount (₹)":e.amount,Note:e.note||""}}),c=d.map(e=>{let t=h.filter(t=>t.customer_id===e.id),s=p.filter(t=>t.customer_id===e.id);return 0===t.length&&0===s.length?null:{Customer:e.name,"Created Date":new Date(e.created_at).toLocaleDateString(),"Total Consignments":t.length,"Total Transactions":s.length,"Last Consignment":t.length>0?Math.max(...t.map(e=>new Date(e.date).getTime())):"None","Last Transaction":s.length>0?Math.max(...s.map(e=>new Date(e.date).getTime())):"None"}}).filter(Boolean),i=e.utils.book_new();e.utils.book_append_sheet(i,e.utils.json_to_sheet(t),"Overall Summary"),e.utils.book_append_sheet(i,e.utils.json_to_sheet(s),"Customer Summary"),e.utils.book_append_sheet(i,e.utils.json_to_sheet(a),"All Consignments"),e.utils.book_append_sheet(i,e.utils.json_to_sheet(l),"All Transactions"),e.utils.book_append_sheet(i,e.utils.json_to_sheet(n),"RTGS Transactions"),e.utils.book_append_sheet(i,e.utils.json_to_sheet(r),"Cash Transactions"),e.utils.book_append_sheet(i,e.utils.json_to_sheet(c),"Customer Details");let o=(S||"all").replace(/[^a-z0-9]+/gi,"_").toLowerCase(),m="granite-ledger-".concat(o,"-").concat(new Date().toISOString().split("T")[0],".xlsx");e.writeFile(i,m),alert("Excel file exported successfully: ".concat(m))}catch(e){console.error(e),alert("Export failed. Ensure internet (for CDN fallback) or bundle 'xlsx'.")}}async function T(e){e.preventDefault();let t=String(new FormData(e.currentTarget).get("new_customer")||"").trim();if(!t)return alert("Customer name is required");let a=await fetch("/api/customers",{method:"POST",body:JSON.stringify({name:t})}),n=await a.json();if(!a.ok)return alert(n.error||"Create failed");o(e=>[n,...e]),s(n.id),e.currentTarget.reset()}async function R(e){var s;e.preventDefault();let a=new FormData(e.currentTarget),n={customer_id:"all"===t?null===(s=d[0])||void 0===s?void 0:s.id:t,date:String(a.get("c_date")||""),total:Number(a.get("c_total")||0),rtgs_expected:Number(a.get("c_rtgs")||0),cash_expected:Number(a.get("c_cash")||0),remarks:String(a.get("c_remarks")||"")};if(!n.customer_id)return alert("Please select/add a customer first.");let r=await fetch("/api/consignments",{method:"POST",body:JSON.stringify(n)}),l=await r.json();if(!r.ok)return alert(l.error||"Create failed");u(e=>[...e,l]),e.currentTarget.reset()}async function A(e){var s;e.preventDefault();let a=new FormData(e.currentTarget),n={customer_id:"all"===t?null===(s=d[0])||void 0===s?void 0:s.id:t,date:String(a.get("t_date")||""),mode:String(a.get("t_mode")||"RTGS"),account_id:String(a.get("t_account")||""),amount:Number(a.get("t_amount")||0),note:String(a.get("t_note")||"")};if(!n.customer_id)return alert("Please select/add a customer first.");let r=await fetch("/api/transactions",{method:"POST",body:JSON.stringify(n)}),l=await r.json();if(!r.ok)return alert(l.error||"Create failed");g(e=>[...e,l]),e.currentTarget.reset()}async function E(e,t){let s=t.rtgs_expected||0,a=t.cash_expected||0,n=t.total||0;if(Math.abs(n-(s+a))>.01){alert("Validation Error: Total (₹".concat(n.toLocaleString(),") must equal RTGS Expected (₹").concat(s.toLocaleString(),") + Cash Expected (₹").concat(a.toLocaleString(),") = ₹").concat((s+a).toLocaleString()));return}let r={total:n,rtgs_expected:s,cash_expected:a,remarks:t.remarks||""},l=await fetch("/api/consignments/".concat(e),{method:"PUT",body:JSON.stringify(r)}),c=await l.json();if(!l.ok)return alert(c.error||"Update failed");u(t=>t.map(t=>t.id===e?{...t,...r}:t))}async function M(e){if(!confirm("Are you sure you want to delete this consignment?"))return;let t=await fetch("/api/consignments/".concat(e),{method:"DELETE"}),s=await t.json();if(!t.ok)return alert(s.error||"Delete failed");u(t=>t.filter(t=>t.id!==e)),alert("Consignment deleted successfully!")}async function D(e,t){let s={amount:t.amount||0,note:t.note||""},a=await fetch("/api/transactions/".concat(e),{method:"PUT",body:JSON.stringify(s)}),n=await a.json();if(!a.ok)return alert(n.error||"Update failed");g(t=>t.map(t=>t.id===e?{...t,...s}:t))}async function G(e){if(!confirm("Are you sure you want to delete this transaction?"))return;let t=await fetch("/api/transactions/".concat(e),{method:"DELETE"}),s=await t.json();if(!t.ok)return alert(s.error||"Delete failed");g(t=>t.filter(t=>t.id!==e)),alert("Transaction deleted successfully!")}return(0,a.jsx)(f,{children:(0,a.jsxs)("div",{className:"min-h-screen w-full bg-gray-50 p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold",children:"Granite Customer Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage consignments and payments with comprehensive table views"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("a",{href:"/analytics",className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-xl transition-colors",children:[(0,a.jsx)(v,{className:"w-4 h-4 mr-2"}),"Analytics"]}),(0,a.jsxs)("a",{href:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-xl transition-colors",children:[(0,a.jsx)(b,{className:"w-4 h-4 mr-2"}),"Admin Panel"]})]})]}),(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[(0,a.jsxs)("select",{className:"border rounded-xl px-3 py-2 md:col-span-4",value:t,onChange:e=>s(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All customers"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-xl px-3 py-2 md:col-span-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),(0,a.jsx)(j.I,{type:"date",className:"border-0 p-0 focus-visible:ring-0 w-full min-w-[160px]",value:r,onChange:e=>l(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border rounded-xl px-3 py-2 md:col-span-2",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),(0,a.jsx)(j.I,{type:"date",className:"border-0 p-0 focus-visible:ring-0 w-full min-w-[160px]",value:c,onChange:e=>i(e.target.value)})]}),(0,a.jsxs)("form",{onSubmit:T,className:"flex items-stretch gap-2 md:col-span-4 justify-self-end w-full md:w-auto",children:[(0,a.jsx)(j.I,{name:"new_customer",placeholder:"Add customer (unique)",className:"border rounded-xl px-3 py-2 h-11 text-base flex-1 md:w-[260px]"}),(0,a.jsxs)(N.z,{type:"submit",className:"h-11 rounded-2xl shrink-0",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"})," Add"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"px-6 py-2 rounded-full border text-lg font-semibold bg-blue-50 text-blue-700 border-blue-200 shadow-sm",children:S||"Select a customer"}),(0,a.jsxs)(N.z,{type:"button",className:"rounded-2xl pointer-events-auto",variant:"secondary",onClick:C,children:[(0,a.jsx)(_,{className:"w-4 h-4 mr-2"})," Export Excel"]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Expected Total"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:L(y.expectedTotal)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Expected RTGS"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:L(y.expectedRTGS)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 uppercase tracking-wide",children:"Expected Cash"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:L(y.expectedCASH)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,a.jsx)("div",{className:"text-xs text-blue-600 uppercase tracking-wide",children:"Received RTGS"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:L(y.receivedRTGS)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,a.jsx)("div",{className:"text-xs text-green-600 uppercase tracking-wide",children:"Received Cash"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:L(y.receivedCASH)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,a.jsx)("div",{className:"text-xs text-amber-600 uppercase tracking-wide",children:"Pending RTGS"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:L(Math.max(0,y.expectedRTGS-y.receivedRTGS))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:[(0,a.jsx)("div",{className:"text-xs text-amber-600 uppercase tracking-wide",children:"Pending Cash"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:L(Math.max(0,y.expectedCASH-y.receivedCASH))})]})]}),(0,a.jsx)(Z,{consignments:h,onAddConsignment:R,onEditConsignment:E,onDeleteConsignment:M,customerId:t,customers:d}),(0,a.jsx)(I,{transactions:p,accounts:x,customers:d,onAddTransaction:A,onEditTransaction:D,onDeleteTransaction:G}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Granite Ledger - Comprehensive consignment and payment management system"})]})})}},495:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var a=s(7437);function n(e){let{className:t="",variant:s="default",size:n="default",...r}=e;return(0,a.jsx)("button",{className:"".concat("inline-flex items-center justify-center font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-md transition-colors"," ").concat({default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs",lg:"px-6 py-3 text-base"}[n]," ").concat({default:"bg-black hover:bg-gray-800 text-white focus:ring-gray-500",secondary:"bg-gray-100 hover:bg-gray-200 text-gray-900 focus:ring-gray-500",outline:"border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-gray-500",destructive:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500"}[s]," ").concat(t),...r})}s(2265)},6013:function(e,t,s){"use strict";s.d(t,{Zb:function(){return n},aY:function(){return r}});var a=s(7437);function n(e){let{className:t="",...s}=e;return(0,a.jsx)("div",{className:"bg-white border rounded-2xl ".concat(t),...s})}function r(e){let{className:t="",...s}=e;return(0,a.jsx)("div",{className:t,...s})}s(2265)},3102:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(7437);let n=s(2265).forwardRef((e,t)=>{let{className:s="",...n}=e;return(0,a.jsx)("input",{ref:t,className:"border rounded-md px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500 ".concat(s),...n})});n.displayName="Input"},4241:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9003:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},6649:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[425,750,971,23,744],function(){return e(e.s=5929)}),_N_E=e.O()}]);