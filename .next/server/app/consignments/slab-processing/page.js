(()=>{var e={};e.id=874,e.ids=[874],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6994:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>o}),t(7513),t(9e3),t(5866);var a=t(3191),l=t(8716),r=t(7922),n=t.n(r),i=t(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o=["",{children:["consignments",{children:["slab-processing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7513)),"/Users/bala/Downloads/granite-ledger-1/app/consignments/slab-processing/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9e3)),"/Users/bala/Downloads/granite-ledger-1/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/bala/Downloads/granite-ledger-1/app/consignments/slab-processing/page.tsx"],x="/consignments/slab-processing/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/consignments/slab-processing/page",pathname:"/consignments/slab-processing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3723:(e,s,t)=>{Promise.resolve().then(t.bind(t,507))},507:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(326),l=t(7577),r=t(755),n=t(3071),i=t(4432),c=t(772),o=t(3812),d=t(3855),x=t(8705),m=t(7444),p=t(6754),h=t(7069),g=t(8307),u=t(8091);function b(){let{showToast:e}=(0,o.p)(),[s,t]=(0,l.useState)(!0),[b,j]=(0,l.useState)(!1),[f,y]=(0,l.useState)([]),[N,v]=(0,l.useState)([]),[w,k]=(0,l.useState)(""),[_,S]=(0,l.useState)("all"),[P,q]=(0,l.useState)({block_id:"",part_name:"",slabs_count:"",sqft:"",thickness:"20"}),C=async()=>{try{t(!0);let[e,s]=await Promise.all([fetch("/api/available-blocks"),fetch("/api/slab-processing")]);if(e.ok){let s=await e.json();y(s)}if(s.ok){let e=await s.json();v(e)}}catch(s){console.error("Error loading data:",s),e("error","Failed to load data")}finally{t(!1)}},Z=async()=>{if(!P.block_id||!P.part_name||!P.slabs_count||!P.sqft){e("error","Please fill in all required fields");return}let s=parseInt(P.slabs_count),t=parseFloat(P.sqft),a=parseFloat(P.thickness);if(s<=0||t<=0||a<=0){e("error","Please enter valid positive numbers");return}try{let l=await fetch("/api/slab-processing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({block_id:P.block_id,part_name:P.part_name,slabs_count:s,sqft:t,thickness:a})});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to add slab processing")}await C(),q({block_id:"",part_name:"",slabs_count:"",sqft:"",thickness:"20"}),j(!1),e("success","Slab processing added successfully!")}catch(s){console.error("Error adding slab processing:",s),e("error",s instanceof Error?s.message:"Failed to add slab processing")}},M=async s=>{if(confirm("Are you sure you want to delete this slab processing record?"))try{let t=await fetch(`/api/slab-processing?id=${s}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete slab processing")}await C(),e("success","Slab processing deleted successfully!")}catch(s){console.error("Error deleting slab processing:",s),e("error",s instanceof Error?s.message:"Failed to delete slab processing")}},E={totalBlocks:f.length,processedParts:N.length,totalSlabs:N.reduce((e,s)=>e+s.slabs_count,0),totalSqft:N.reduce((e,s)=>e+s.sqft,0)},F=Array.from(new Set(f.map(e=>e.granite_consignments.consignment_number))),A=N.filter(e=>{let s=e.granite_blocks.block_no.toLowerCase().includes(w.toLowerCase())||e.part_name.toLowerCase().includes(w.toLowerCase()),t="all"===_||f.find(s=>s.id===e.block_id&&s.granite_consignments.consignment_number===_);return s&&t}),T=f.find(e=>e.id===P.block_id);return s?a.jsx(r.L,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-lg text-gray-600",children:"Loading slab processing data..."})})}):a.jsx(r.L,{children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Slab Processing"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Process raw granite blocks into slabs"})]}),(0,a.jsxs)(c.z,{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Process New Slab"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(n.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available Blocks"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.totalBlocks})]}),a.jsx(x.Z,{className:"w-8 h-8 text-blue-600"})]})}),a.jsx(n.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Processed Parts"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.processedParts})]}),a.jsx(m.Z,{className:"w-8 h-8 text-green-600"})]})}),a.jsx(n.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Slabs"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.totalSlabs})]}),a.jsx(p.Z,{className:"w-8 h-8 text-purple-600"})]})}),a.jsx(n.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sq Ft"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.totalSqft.toFixed(1)})]}),a.jsx(h.Z,{className:"w-8 h-8 text-orange-600"})]})})]}),b&&(0,a.jsxs)(n.Zb,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Process New Slab"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Block"}),(0,a.jsxs)("select",{value:P.block_id,onChange:e=>q({...P,block_id:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm p-2",children:[a.jsx("option",{value:"",children:"Select a block"}),f.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.block_no," - ",e.granite_consignments.granite_suppliers.name]},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Part Name"}),(0,a.jsxs)("select",{value:P.part_name,onChange:e=>q({...P,part_name:e.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm p-2",children:[a.jsx("option",{value:"",children:"Select part"}),["A","B","C","D"].map(e=>(0,a.jsxs)("option",{value:e,children:["Part ",e]},e))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Slabs"}),a.jsx(i.I,{type:"number",min:"1",value:P.slabs_count,onChange:e=>q({...P,slabs_count:e.target.value}),placeholder:"85"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Sq Ft"}),a.jsx(i.I,{type:"number",step:"0.1",min:"0",value:P.sqft,onChange:e=>q({...P,sqft:e.target.value}),placeholder:"450.5"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thickness (mm)"}),a.jsx(i.I,{type:"number",min:"1",value:P.thickness,onChange:e=>q({...P,thickness:e.target.value}),placeholder:"20"})]})]}),T&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Block Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Block No:"}),a.jsx("span",{className:"ml-2 font-medium",children:T.block_no})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Consignment:"}),a.jsx("span",{className:"ml-2 font-medium",children:T.granite_consignments.consignment_number})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Supplier:"}),a.jsx("span",{className:"ml-2 font-medium",children:T.granite_consignments.granite_suppliers.name})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Gross Measurement:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[T.gross_measurement,"m"]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Net Measurement:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[T.net_measurement,"m"]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[a.jsx(c.z,{onClick:Z,children:"Add Slab Processing"}),a.jsx(c.z,{variant:"outline",onClick:()=>j(!1),children:"Cancel"})]})]}),a.jsx(n.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx(i.I,{placeholder:"Search by block number or part name...",value:w,onChange:e=>k(e.target.value),className:"pl-10"})]})}),a.jsx("div",{className:"sm:w-64",children:(0,a.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm p-2",children:[a.jsx("option",{value:"all",children:"All Consignments"}),F.map(e=>a.jsx("option",{value:e,children:e},e))]})})]})}),(0,a.jsxs)(n.Zb,{className:"overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Slab Processing Records"})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Block No"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Part"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slabs Count"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sq Ft"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thickness"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===A.length?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No slab processing records found"})}):A.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:e.granite_blocks.block_no})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Part ",e.part_name]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:e.slabs_count}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:[e.sqft.toFixed(1)," sq ft"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:[e.thickness,"mm"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>M(e.id),className:"text-red-600 hover:text-red-900",children:a.jsx(u.Z,{className:"w-4 h-4"})})})})]},e.id))})]})})]})]})})}},6754:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7069:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},7513:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});var a=t(8570);let l=(0,a.createProxy)(String.raw`/Users/bala/Downloads/granite-ledger-1/app/consignments/slab-processing/page.tsx`),{__esModule:r,$$typeof:n}=l;l.default;let i=(0,a.createProxy)(String.raw`/Users/bala/Downloads/granite-ledger-1/app/consignments/slab-processing/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,978,993,148],()=>t(6994));module.exports=a})();