(()=>{var e={};e.id=793,e.ids=[793],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6088:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o}),t(1858),t(9e3),t(5866);var a=t(3191),l=t(8716),r=t(7922),i=t.n(r),n=t(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let o=["",{children:["consignments",{children:["calculator",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1858)),"/Users/bala/Downloads/granite-ledger-1/app/consignments/calculator/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9e3)),"/Users/bala/Downloads/granite-ledger-1/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/bala/Downloads/granite-ledger-1/app/consignments/calculator/page.tsx"],m="/consignments/calculator/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/consignments/calculator/page",pathname:"/consignments/calculator",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2909:(e,s,t)=>{Promise.resolve().then(t.bind(t,4426))},4426:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(326),l=t(7577),r=t(755),i=t(3071),n=t(772),c=t(4432),o=t(2257),d=t(3855),m=t(1215);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,t(2881).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var h=t(8091);function p(){let[e,s]=(0,l.useState)([]),[t,p]=(0,l.useState)({calculation_name:"",description:"",total_blocks:0,net_meters_per_block:0,gross_meters_per_block:0,cost_per_meter:0,loading_charges:0,transport_charges:0,quarry_commission:0,polish_percentage:0,laputra_percentage:0,whiteline_percentage:0,polish_sale_price:0,laputra_sale_price:0,whiteline_sale_price:0}),[u,g]=(0,l.useState)({total_net_measurement:0,total_gross_measurement:0}),[j,b]=(0,l.useState)(!1),[f,N]=(0,l.useState)(!1),[v,_]=(0,l.useState)(!1),[y,w]=(0,l.useState)(""),k=async()=>{try{let e=await fetch("/api/consignment-calculations"),t=await e.json();e.ok?s(t.data):w(t.error||"Failed to fetch calculations")}catch(e){w("Failed to fetch calculations"),console.error("Error fetching calculations:",e)}},C=(e=>{let s=e.total_blocks*e.gross_meters_per_block*300,t=e.polish_percentage/100*s,a=e.laputra_percentage/100*s,l=e.whiteline_percentage/100*s,r=4500*e.total_blocks,i=e.loading_charges||0,n=e.total_blocks*e.net_meters_per_block*e.cost_per_meter+i+r+e.quarry_commission,c=25*t,o=30*a,d=25*l,m=c+o+d,x=n+m,h=t*(e.polish_sale_price||0),p=a*(e.laputra_sale_price||0),u=l*(e.whiteline_sale_price||0),g=h+p+u,j=g-x;return{totalSqft:s,polishSqft:t,laputraSqft:a,whitelineSqft:l,rawMaterialCost:n,polishCost:c,laputraCost:o,whitelineCost:d,totalProductionCost:m,totalCost:x,costPerSqft:s>0?n/s:0,loadingCharges:i,autoTransportCharges:r,polishSaleAmount:h,laputraSaleAmount:p,whitelineSaleAmount:u,totalSaleRevenue:g,profitLoss:j,profitMarginPercentage:g>0?j/g*100:0}})(t),S=(e,s)=>{p(t=>({...t,[e]:s}))},q=(e,s)=>{g(t=>({...t,[e]:s}))},P=e=>{p(s=>({...s,loading_charges:e})),b(!0)},F=async()=>{if(!t.calculation_name.trim()){w("Calculation name is required");return}if(t.total_blocks<=0||u.total_net_measurement<=0||u.total_gross_measurement<=0||t.cost_per_meter<=0){w("Total blocks, total net measurement, total gross measurement, and cost per meter must be greater than 0");return}_(!0),w("");try{let e={...t,loading_charges:t.loading_charges,transport_charges:4500*t.total_blocks},s=await fetch("/api/consignment-calculations",{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();s.ok?(await k(),D()):w(a.error||"Failed to save calculation")}catch(e){w("Failed to save calculation"),console.error("Error saving calculation:",e)}finally{_(!1)}},L=e=>{p(e),g({total_net_measurement:e.total_blocks*e.net_meters_per_block,total_gross_measurement:e.total_blocks*e.gross_meters_per_block});let s=1500*e.total_blocks;b(e.loading_charges!==s),N(!0),w("")},M=async e=>{if(confirm("Are you sure you want to delete this calculation?")){_(!0);try{let s=await fetch(`/api/consignment-calculations?id=${e}`,{method:"DELETE"});if(s.ok)await k();else{let e=await s.json();w(e.error||"Failed to delete calculation")}}catch(e){w("Failed to delete calculation"),console.error("Error deleting calculation:",e)}finally{_(!1)}}},D=()=>{p({calculation_name:"",description:"",total_blocks:0,net_meters_per_block:0,gross_meters_per_block:0,cost_per_meter:0,loading_charges:0,transport_charges:0,quarry_commission:0,polish_percentage:0,laputra_percentage:0,whiteline_percentage:0,polish_sale_price:0,laputra_sale_price:0,whiteline_sale_price:0}),g({total_net_measurement:0,total_gross_measurement:0}),b(!1),N(!1),w("")},T=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),Z=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2}).format(e);return a.jsx(r.L,{children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(o.Z,{className:"w-8 h-8 text-blue-600"}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Consignment Calculator"}),a.jsx("p",{className:"text-gray-600",children:"Calculate costs and estimates for granite consignments"})]})]}),(0,a.jsxs)(n.z,{onClick:D,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(d.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"New Calculation"})]})]}),y&&a.jsx(i.Zb,{className:"mb-6 p-4 bg-red-50 border-red-200",children:a.jsx("p",{className:"text-red-600",children:y})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8",children:[a.jsx(i.Zb,{className:"p-4 bg-green-50 border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-700",children:"Raw Material Cost"}),a.jsx("p",{className:"text-xl font-bold text-green-900",children:T(C.rawMaterialCost)})]}),a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-green-600 text-lg",children:"\uD83C\uDFD7️"})})]})}),a.jsx(i.Zb,{className:"p-4 bg-yellow-50 border-yellow-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-yellow-700",children:"Processing Costs"}),a.jsx("p",{className:"text-xl font-bold text-yellow-900",children:T(C.totalProductionCost)})]}),a.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-yellow-600 text-lg",children:"⚙️"})})]})}),a.jsx(i.Zb,{className:"p-4 bg-purple-50 border-purple-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Total Project Cost"}),a.jsx("p",{className:"text-xl font-bold text-purple-900",children:T(C.totalCost)})]}),a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-purple-600 text-lg",children:"\uD83D\uDCB0"})})]})}),a.jsx(i.Zb,{className:"p-4 bg-teal-50 border-teal-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-teal-700",children:"Cost per SqFt"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-teal-900",children:["₹",C.costPerSqft.toFixed(2)]})]}),a.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-teal-600 text-lg",children:"\uD83D\uDCCF"})})]})}),a.jsx(i.Zb,{className:"p-4 bg-indigo-50 border-indigo-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-indigo-700",children:"Total Sale Revenue"}),a.jsx("p",{className:"text-xl font-bold text-indigo-900",children:T(C.totalSaleRevenue)})]}),a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-indigo-600 text-lg",children:"\uD83D\uDCB5"})})]})}),a.jsx(i.Zb,{className:`p-4 ${C.profitLoss>=0?"bg-emerald-50 border-emerald-200":"bg-red-50 border-red-200"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:`text-sm font-medium ${C.profitLoss>=0?"text-emerald-700":"text-red-700"}`,children:C.profitLoss>=0?"PROFIT":"LOSS"}),a.jsx("p",{className:`text-xl font-bold ${C.profitLoss>=0?"text-emerald-900":"text-red-900"}`,children:T(Math.abs(C.profitLoss))}),(0,a.jsxs)("p",{className:`text-xs ${C.profitLoss>=0?"text-emerald-600":"text-red-600"}`,children:[C.profitMarginPercentage.toFixed(1),"% margin"]})]}),a.jsx("div",{className:`w-8 h-8 ${C.profitLoss>=0?"bg-emerald-100":"bg-red-100"} rounded-full flex items-center justify-center`,children:a.jsx("span",{className:`${C.profitLoss>=0?"text-emerald-600":"text-red-600"} text-lg`,children:C.profitLoss>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"})})]})})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(i.Zb,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:f?"Edit Calculation":"New Calculation"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calculation Name *"}),a.jsx(c.I,{type:"text",value:t.calculation_name,onChange:e=>S("calculation_name",e.target.value),placeholder:"Enter calculation name",className:"w-full",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx(c.I,{type:"text",value:t.description||"",onChange:e=>S("description",e.target.value),placeholder:"Optional description",className:"w-full"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Raw Material Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Blocks *"}),a.jsx(c.I,{type:"number",value:t.total_blocks||"",onChange:e=>S("total_blocks",parseInt(e.target.value)||0),min:"0",placeholder:"e.g., 100",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Net Measurement (What you pay for) *"}),a.jsx(c.I,{type:"number",step:"0.01",value:u.total_net_measurement||"",onChange:e=>q("total_net_measurement",parseFloat(e.target.value)||0),min:"0",placeholder:"e.g., 200.0",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Gross Measurement (What you actually get) *"}),a.jsx(c.I,{type:"number",step:"0.01",value:u.total_gross_measurement||"",onChange:e=>q("total_gross_measurement",parseFloat(e.target.value)||0),min:"0",placeholder:"e.g., 700.0",required:!0})]}),t.total_blocks>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Net Meters per Block (Auto-calculated)"}),(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("span",{className:"text-sm text-blue-600",children:[u.total_net_measurement," \xf7 ",t.total_blocks," blocks ="]}),(0,a.jsxs)("span",{className:"font-semibold text-blue-900 ml-1",children:[t.net_meters_per_block.toFixed(3),"m per block"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gross Meters per Block (Auto-calculated)"}),(0,a.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("span",{className:"text-sm text-green-600",children:[u.total_gross_measurement," \xf7 ",t.total_blocks," blocks ="]}),(0,a.jsxs)("span",{className:"font-semibold text-green-900 ml-1",children:[t.gross_meters_per_block.toFixed(3),"m per block"]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost per Meter (₹) *"}),a.jsx(c.I,{type:"number",step:"0.01",value:t.cost_per_meter||"",onChange:e=>S("cost_per_meter",parseFloat(e.target.value)||0),min:"0",placeholder:"e.g., 1000",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"\uD83D\uDE9B"}),"Loading Charges (₹) - ",j?"Manual Override":"Auto Calculated"]}),a.jsx("div",{className:"space-y-2",children:j?(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c.I,{type:"number",step:"0.01",value:t.loading_charges||"",onChange:e=>P(parseFloat(e.target.value)||0),min:"0",placeholder:"Enter custom loading charges",className:"w-full"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.z,{type:"button",onClick:()=>{let e=1500*t.total_blocks;p(s=>({...s,loading_charges:e})),b(!1)},size:"sm",variant:"outline",className:"text-xs",children:["Reset to Auto (₹",(1500*t.total_blocks).toLocaleString(),")"]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Auto would be: ₹1,500 \xd7 ",t.total_blocks," blocks"]})]})]}):(0,a.jsxs)("div",{className:"relative p-4 bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"₹1,500 per block"}),(0,a.jsxs)("span",{className:"text-sm text-blue-700",children:["₹1,500 \xd7 ",t.total_blocks," blocks"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"text-lg font-bold text-blue-900",children:T(C.loadingCharges)}),a.jsx("div",{className:"text-xs text-blue-600",children:"Automatically calculated"})]})]}),a.jsx(n.z,{type:"button",onClick:()=>b(!0),size:"sm",variant:"outline",className:"mt-2 text-xs",children:"Override with Custom Amount"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"\uD83D\uDE9A"}),"Transport Charges (₹) - Auto Calculated"]}),a.jsx("div",{className:"relative p-4 bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs text-green-600 font-medium",children:"₹4,500 per block"}),(0,a.jsxs)("span",{className:"text-sm text-green-700",children:["₹4,500 \xd7 ",t.total_blocks," blocks"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"text-lg font-bold text-green-900",children:T(C.autoTransportCharges)}),a.jsx("div",{className:"text-xs text-green-600",children:"Automatically calculated"})]})]})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quarry Commission (₹)"}),a.jsx(c.I,{type:"number",step:"0.01",value:t.quarry_commission||"",onChange:e=>S("quarry_commission",parseFloat(e.target.value)||0),min:"0",placeholder:"e.g., 15000"})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Processing Distribution (%)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Polish % (₹25/sqft)"}),a.jsx(c.I,{type:"number",step:"0.1",value:t.polish_percentage||"",onChange:e=>S("polish_percentage",parseFloat(e.target.value)||0),min:"0",max:"100",placeholder:"e.g., 40"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Laputra % (₹30/sqft)"}),a.jsx(c.I,{type:"number",step:"0.1",value:t.laputra_percentage||"",onChange:e=>S("laputra_percentage",parseFloat(e.target.value)||0),min:"0",max:"100",placeholder:"e.g., 35"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"White Line % (₹25/sqft)"}),a.jsx(c.I,{type:"number",step:"0.1",value:t.whiteline_percentage||"",onChange:e=>S("whiteline_percentage",parseFloat(e.target.value)||0),min:"0",max:"100",placeholder:"e.g., 25"})]})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Total percentage: ",(t.polish_percentage+t.laputra_percentage+t.whiteline_percentage).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Expected Sale Prices (₹ per sqft)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Polish Sale Price (₹/sqft)"}),a.jsx(c.I,{type:"number",step:"0.01",value:t.polish_sale_price||"",onChange:e=>S("polish_sale_price",parseFloat(e.target.value)||0),min:"0",placeholder:"e.g., 45"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Laputra Sale Price (₹/sqft)"}),a.jsx(c.I,{type:"number",step:"0.01",value:t.laputra_sale_price||"",onChange:e=>S("laputra_sale_price",parseFloat(e.target.value)||0),min:"0",placeholder:"e.g., 55"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"White Line Sale Price (₹/sqft)"}),a.jsx(c.I,{type:"number",step:"0.01",value:t.whiteline_sale_price||"",onChange:e=>S("whiteline_sale_price",parseFloat(e.target.value)||0),min:"0",placeholder:"e.g., 40"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsxs)(n.z,{onClick:F,disabled:v,className:"flex items-center space-x-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:v?"Saving...":f?"Update":"Save"})]}),f&&a.jsx(n.z,{onClick:D,variant:"outline",children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(i.Zb,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Cost Analysis"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"Production Estimates"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-blue-700 font-medium",children:"Total Expected SqFt:"}),(0,a.jsxs)("div",{className:"text-blue-600 ml-2",children:[t.total_blocks," blocks \xd7 ",t.gross_meters_per_block,"m \xd7 300 = ",Z(C.totalSqft)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-blue-700 font-medium",children:"Polish SqFt:"}),(0,a.jsxs)("div",{className:"text-blue-600 ml-2",children:[t.polish_percentage,"% of ",Z(C.totalSqft)," = ",Z(C.polishSqft)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-blue-700 font-medium",children:"Laputra SqFt:"}),(0,a.jsxs)("div",{className:"text-blue-600 ml-2",children:[t.laputra_percentage,"% of ",Z(C.totalSqft)," = ",Z(C.laputraSqft)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-blue-700 font-medium",children:"White Line SqFt:"}),(0,a.jsxs)("div",{className:"text-blue-600 ml-2",children:[t.whiteline_percentage,"% of ",Z(C.totalSqft)," = ",Z(C.whitelineSqft)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-green-900 mb-3",children:"Raw Material Cost"}),a.jsx("div",{className:"text-2xl font-bold text-green-900 mb-3",children:T(C.rawMaterialCost)}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-green-700",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Material Cost:"}),(0,a.jsxs)("div",{className:"ml-2",children:[t.total_blocks," blocks \xd7 ",t.net_meters_per_block,"m \xd7 ₹",Z(t.cost_per_meter)," = ",T(t.total_blocks*t.net_meters_per_block*t.cost_per_meter)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Loading Charges:"}),a.jsx("div",{className:"ml-2",children:j?`Custom amount: ${T(C.loadingCharges)}`:`${t.total_blocks} blocks \xd7 ₹1,500 = ${T(C.loadingCharges)}`})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Transport Charges:"}),(0,a.jsxs)("div",{className:"ml-2",children:[t.total_blocks," blocks \xd7 ₹4,500 = ",T(C.autoTransportCharges)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:"Quarry Commission:"}),(0,a.jsxs)("div",{className:"ml-2",children:["₹",Z(t.quarry_commission)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-yellow-900 mb-3",children:"Processing Costs"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-yellow-700 font-medium",children:"Polish Cost:"}),(0,a.jsxs)("div",{className:"text-yellow-600 ml-2",children:[Z(C.polishSqft)," sqft \xd7 ₹25 = ",T(C.polishCost)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-yellow-700 font-medium",children:"Laputra Cost:"}),(0,a.jsxs)("div",{className:"text-yellow-600 ml-2",children:[Z(C.laputraSqft)," sqft \xd7 ₹30 = ",T(C.laputraCost)]})]}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-yellow-700 font-medium",children:"White Line Cost:"}),(0,a.jsxs)("div",{className:"text-yellow-600 ml-2",children:[Z(C.whitelineSqft)," sqft \xd7 ₹25 = ",T(C.whitelineCost)]})]}),(0,a.jsxs)("div",{className:"border-t pt-2 mt-2",children:[a.jsx("div",{className:"text-yellow-800 font-medium",children:"Total Production:"}),a.jsx("div",{className:"text-yellow-700 ml-2 text-xs",children:"Raw Material Cost + Production Cost"}),(0,a.jsxs)("div",{className:"text-yellow-700 ml-2",children:[T(C.rawMaterialCost)," + ",T(C.totalProductionCost)," = ",T(C.rawMaterialCost+C.totalProductionCost)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-purple-900 mb-2",children:"Total Project Cost"}),a.jsx("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:T(C.totalCost)}),(0,a.jsxs)("div",{className:"text-sm text-purple-700",children:[(0,a.jsxs)("div",{children:["Raw Material: ",T(C.rawMaterialCost)]}),(0,a.jsxs)("div",{children:["+ Processing: ",T(C.totalProductionCost)]}),(0,a.jsxs)("div",{className:"border-t pt-1 font-medium",children:["= Total: ",T(C.totalCost)]})]})]}),(0,a.jsxs)("div",{className:"bg-teal-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-teal-900 mb-2",children:"Raw Material Cost per SqFt"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-teal-900",children:["₹",C.costPerSqft.toFixed(2)," per SqFt"]}),a.jsx("div",{className:"text-sm text-teal-700 mt-1",children:"Total raw material cost \xf7 Total SqFt produced"})]})]})]}),(0,a.jsxs)(i.Zb,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Expected Sales"}),a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-indigo-900 mb-2",children:"Expected Sale Revenue"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-indigo-700",children:["Polish Sale (",Z(C.polishSqft)," sqft \xd7 ₹",t.polish_sale_price,"):"]}),a.jsx("span",{className:"font-semibold text-indigo-900",children:T(C.polishSaleAmount)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-indigo-700",children:["Laputra Sale (",Z(C.laputraSqft)," sqft \xd7 ₹",t.laputra_sale_price,"):"]}),a.jsx("span",{className:"font-semibold text-indigo-900",children:T(C.laputraSaleAmount)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-indigo-700",children:["White Line Sale (",Z(C.whitelineSqft)," sqft \xd7 ₹",t.whiteline_sale_price,"):"]}),a.jsx("span",{className:"font-semibold text-indigo-900",children:T(C.whitelineSaleAmount)})]}),(0,a.jsxs)("div",{className:"border-t pt-2 flex justify-between",children:[a.jsx("span",{className:"font-medium text-indigo-900",children:"Total Sale Revenue:"}),a.jsx("span",{className:"font-bold text-indigo-900",children:T(C.totalSaleRevenue)})]})]})]})})]}),(0,a.jsxs)(i.Zb,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Profit/Loss Analysis"}),a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:`p-4 rounded-lg ${C.profitLoss>=0?"bg-green-50":"bg-red-50"}`,children:[a.jsx("h3",{className:`font-medium mb-2 ${C.profitLoss>=0?"text-green-900":"text-red-900"}`,children:"Financial Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:C.profitLoss>=0?"text-green-700":"text-red-700",children:"Total Sale Revenue:"}),a.jsx("span",{className:`font-semibold ${C.profitLoss>=0?"text-green-900":"text-red-900"}`,children:T(C.totalSaleRevenue)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:C.profitLoss>=0?"text-green-700":"text-red-700",children:"Total Cost:"}),a.jsx("span",{className:`font-semibold ${C.profitLoss>=0?"text-green-900":"text-red-900"}`,children:T(C.totalCost)})]}),(0,a.jsxs)("div",{className:"border-t pt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:`font-bold text-lg ${C.profitLoss>=0?"text-green-900":"text-red-900"}`,children:C.profitLoss>=0?"PROFIT:":"LOSS:"}),a.jsx("span",{className:`font-bold text-2xl ${C.profitLoss>=0?"text-green-900":"text-red-900"}`,children:T(Math.abs(C.profitLoss))})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-1",children:[a.jsx("span",{className:`text-sm ${C.profitLoss>=0?"text-green-700":"text-red-700"}`,children:"Profit Margin:"}),(0,a.jsxs)("span",{className:`text-sm font-semibold ${C.profitLoss>=0?"text-green-900":"text-red-900"}`,children:[C.profitMarginPercentage.toFixed(1),"%"]})]})]})]})]})})]})]})]}),e.length>0&&(0,a.jsxs)("div",{className:"mt-8",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-900",children:"Saved Calculations"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsxs)(i.Zb,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.calculation_name}),e.description&&a.jsx("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(n.z,{onClick:()=>L(e),size:"sm",variant:"outline",children:a.jsx(x,{className:"w-4 h-4"})}),a.jsx(n.z,{onClick:()=>M(e.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:a.jsx(h.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Blocks:"}),a.jsx("span",{className:"font-medium",children:e.total_blocks})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Expected SqFt:"}),a.jsx("span",{className:"font-medium",children:Z(e.total_expected_sqft||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Raw Material:"}),a.jsx("span",{className:"font-medium",children:T(e.raw_material_cost||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Production:"}),a.jsx("span",{className:"font-medium",children:T(e.total_production_cost||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[a.jsx("span",{className:"font-semibold text-gray-900",children:"Total Cost:"}),a.jsx("span",{className:"font-bold text-purple-600",children:T(e.total_cost||0)})]})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["Created: ",e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"]})]},e.id))})]})]})})}},3855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1215:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},8091:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1858:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});var a=t(8570);let l=(0,a.createProxy)(String.raw`/Users/bala/Downloads/granite-ledger-1/app/consignments/calculator/page.tsx`),{__esModule:r,$$typeof:i}=l;l.default;let n=(0,a.createProxy)(String.raw`/Users/bala/Downloads/granite-ledger-1/app/consignments/calculator/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,978,993,148],()=>t(6088));module.exports=a})();