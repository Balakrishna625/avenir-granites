(()=>{var e={};e.id=929,e.ids=[929],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7960:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(1839),s(1506),s(5866);var a=s(3191),n=s(8716),r=s(7922),l=s.n(r),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["consignments",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1839)),"/Users/bala/Downloads/granite-ledger-1/app/consignments/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/Users/bala/Downloads/granite-ledger-1/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/bala/Downloads/granite-ledger-1/app/consignments/new/page.tsx"],m="/consignments/new/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/consignments/new/page",pathname:"/consignments/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3530:(e,t,s)=>{Promise.resolve().then(s.bind(s,6040))},6040:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(326),n=s(7577),r=s(5047),l=s(3071),i=s(772),o=s(4432),c=s(6333),d=s(9734),m=s(434),p=s(755);function x(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(!1),[x,u]=(0,n.useState)([]),[g,h]=(0,n.useState)({consignment_number:"",supplier_id:"",arrival_date:"",payment_cash:"",payment_upi:"",transport_cost:"",notes:""}),b=async t=>{if(t.preventDefault(),!g.consignment_number||!g.supplier_id||!g.arrival_date){alert("Please fill in all required fields");return}s(!0);try{console.log("Submitting form data:",g);let t=await fetch("/api/granite-consignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to create consignment");let a=parseFloat(g.payment_cash||"0"),n=parseFloat(g.payment_upi||"0"),r=parseFloat(g.transport_cost||"0");alert(`Consignment created successfully!

Consignment Number: ${g.consignment_number}
Total Expenditure: ₹${(a+n+r).toLocaleString()}`),e.push(`/consignments/${s.id}`)}catch(t){console.error("Error creating consignment:",t);let e=t instanceof Error?t.message:"Failed to create consignment. Please try again.";alert(`Error: ${e}`)}finally{s(!1)}},y=parseFloat(g.payment_cash||"0")+parseFloat(g.payment_upi||"0")+parseFloat(g.transport_cost||"0");return a.jsx(p.L,{children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(m.default,{href:"/consignments",children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",children:[a.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Back"]})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"New Consignment"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Create a new granite consignment"})]})]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-5 h-5"}),"Consignment Details"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consignment Number *"}),a.jsx(o.I,{value:g.consignment_number,onChange:e=>h({...g,consignment_number:e.target.value}),placeholder:"CON-241005-001",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier *"}),(0,a.jsxs)("select",{value:g.supplier_id,onChange:e=>h({...g,supplier_id:e.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-white",required:!0,children:[a.jsx("option",{value:"",children:"Select Supplier"}),x.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.contact_person,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Arrival Date *"}),a.jsx(o.I,{type:"date",value:g.arrival_date,onChange:e=>h({...g,arrival_date:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsx(o.I,{value:"ACTIVE",disabled:!0,className:"bg-gray-50"})]})]})]}),(0,a.jsxs)(l.Zb,{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cash Payment (₹)"}),a.jsx(o.I,{type:"number",step:"0.01",value:g.payment_cash,onChange:e=>h({...g,payment_cash:e.target.value}),placeholder:"50000"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"UPI Payment (₹)"}),a.jsx(o.I,{type:"number",step:"0.01",value:g.payment_upi,onChange:e=>h({...g,payment_upi:e.target.value}),placeholder:"25000"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transport Cost (₹)"}),a.jsx(o.I,{type:"number",step:"0.01",value:g.transport_cost,onChange:e=>h({...g,transport_cost:e.target.value}),placeholder:"5000"})]})]}),a.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Total Expenditure:"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["₹",y.toLocaleString()]})]})})]}),(0,a.jsxs)(l.Zb,{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),a.jsx("textarea",{value:g.notes,onChange:e=>h({...g,notes:e.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 h-24 resize-none",placeholder:"Any additional notes about this consignment..."})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[a.jsx(m.default,{href:"/consignments",children:a.jsx(i.z,{variant:"outline",type:"button",children:"Cancel"})}),a.jsx(i.z,{type:"submit",disabled:t,children:t?"Creating...":"Create Consignment"})]})]})]})})}},6333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1839:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});var a=s(8570);let n=(0,a.createProxy)(String.raw`/Users/bala/Downloads/granite-ledger-1/app/consignments/new/page.tsx`),{__esModule:r,$$typeof:l}=n;n.default;let i=(0,a.createProxy)(String.raw`/Users/bala/Downloads/granite-ledger-1/app/consignments/new/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,471,993,734],()=>s(7960));module.exports=a})();